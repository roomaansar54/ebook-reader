{"version":3,"file":"angular-epub-viewer.js","sources":["angular-epub-viewer/out/angularEpubViewer.component.ts","angular-epub-viewer/out/angularEpubViewer.module.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n    AfterViewInit,\n    Component,\n    ElementRef,\n    EventEmitter,\n    Input,\n    NgZone,\n    OnDestroy,\n    Output,\n    ViewChild,\n    ViewEncapsulation\n} from '@angular/core';\nimport {BehaviorSubject} from \"rxjs/BehaviorSubject\";\nimport {Subscription} from \"rxjs/Subscription\";\nimport {\n    EpubChapter,\n    EpubError,\n    EpubLocation,\n    EpubMetadata,\n    EpubPage,\n    EpubSearchResult\n} from \"./angularEpubViewer.models\";\nimport 'rxjs/add/operator/filter';\n\ndeclare const ePub: any;\n\n/**\n * AngularEpubViewer component\n */\n@Component({\n    selector: 'angular-epub-viewer',\n    template: `<div id=\"angularEpubViewerComponent\" [style.padding]=\"padding\" #angularEpubViewerComponent></div>`,\n    styles: [`\n        #angularEpubViewerComponent {\n            width: 100%;\n            height: 100%;\n            margin: 0;\n            overflow: hidden;\n        }\n    `],\n    encapsulation: ViewEncapsulation.None\n})\nexport class AngularEpubViewerComponent implements AfterViewInit, OnDestroy {\n\n    /**\n     * Root container's DOM reference\n     */\n    @ViewChild('angularEpubViewerComponent', {read: ElementRef})\n    root: ElementRef;\n\n    /**\n     * Primary object\n     */\n    epub: any = null;\n\n    /**\n     * Current location of document's rendered part\n     */\n    currentLocation: EpubLocation = {\n        startCfi: null,\n        endCfi: null,\n        page: null,\n        chapter: null\n    };\n\n    /**\n     * Indicates whenever document is ready\n     */\n    documentReady: boolean = false;\n\n    /**\n     * Indicates whenever chapter is displayed\n     */\n    isChapterDisplayed: boolean = false;\n\n    /**\n     * Indicates whenever pagination is computing\n     */\n    computingPagination: boolean = false;\n\n    /**\n     * Indicates whenever searching text\n     */\n    searchingText: boolean = false;\n\n    /**\n     * Root container's padding in px, em, etc.\n     */\n    @Input()\n    padding: string = null;\n    /**\n     * Enables auto calculate of pagination after document is ready or viewport has been changed\n     */\n    @Input()\n    autoPagination: boolean = false;\n    /**\n     * Enables auto loading of metadata after document is ready\n     */\n    @Input()\n    autoMetadata: boolean = false;\n    /**\n     * Enables auto loading of table of contents after document is ready\n     */\n    @Input()\n    autoTOC: boolean = false;\n\n    /**\n     * Get event when document is loaded\n     */\n    @Output('onDocumentReady')\n    onDocumentReady: EventEmitter<void> = new EventEmitter<void>();\n    /**\n     * Get event when chapter is unloaded\n     */\n    @Output('onChapterUnloaded')\n    onChapterUnloaded: EventEmitter<void> = new EventEmitter<void>();\n    /**\n     * Get event when chapter is displayed\n     */\n    @Output('onChapterDisplayed')\n    onChapterDisplayed: EventEmitter<EpubChapter> = new EventEmitter<EpubChapter>();\n    /**\n     * Get event about the current location\n     */\n    @Output('onLocationFound')\n    onLocationFound: EventEmitter<EpubLocation> = new EventEmitter<EpubLocation>();\n    /**\n     * Get event about search results\n     */\n    @Output('onSearchFinished')\n    onSearchFinished: EventEmitter<EpubSearchResult[]> = new EventEmitter<EpubSearchResult[]>();\n    /**\n     * Get event about pagination\n     */\n    @Output('onPaginationComputed')\n    onPaginationComputed: EventEmitter<EpubPage[]> = new EventEmitter<EpubPage[]>();\n    /**\n     * Get event about metadata\n     */\n    @Output('onMetadataLoaded')\n    onMetadataLoaded: EventEmitter<EpubMetadata> = new EventEmitter<EpubMetadata>();\n    /**\n     * Get event about table of contents\n     */\n    @Output('onTOCLoaded')\n    onTOCLoaded: EventEmitter<EpubChapter[]> = new EventEmitter<EpubChapter[]>();\n    /**\n     * Get event when any error occurred\n     */\n    @Output('onErrorOccurred')\n    onErrorOccurred: EventEmitter<EpubError> = new EventEmitter<EpubError>();\n\n    /**\n     * Starts loading document by link only after DOM is ready\n     */\n    private _link: BehaviorSubject<string> = new BehaviorSubject<string>(null);\n    private linkSubscription: Subscription;\n\n    private needSearchText: string = null;\n\n    private needComputePagination: boolean = false;\n\n    constructor(private zone: NgZone) {}\n\n    ngAfterViewInit() {\n        this.linkSubscription = this._link.asObservable()\n            .filter(link => link != null)\n            .subscribe(link => {\n                this.initEpub({\n                    bookPath: link\n                });\n            });\n    }\n\n    private initEpub = (properties: object) => {\n        this.destroyEpub();\n        this.epub = ePub(properties);\n        this.epub.on('book:ready', () => {\n            this.zone.run(() => {\n                this.documentReady = true;\n                this.onDocumentReady.next(null);\n                if (this.autoPagination) {\n                    this.needComputePagination = true;\n                }\n                if (this.autoMetadata) {\n                    this.loadMetadata();\n                }\n                if (this.autoTOC) {\n                    this.loadTOC();\n                }\n            });\n        });\n        this.epub.on('book:pageChanged', (location) => {\n            this.zone.run(() => {\n                if (!this.computingPagination) {\n                    this.currentLocation.page = location.anchorPage;\n                    this.onLocationFound.next(this.currentLocation);\n                }\n            });\n        });\n        this.epub.on('renderer:chapterUnloaded', () => {\n            this.zone.run(() => {\n                this.isChapterDisplayed = false;\n                this.onChapterUnloaded.next(null);\n            });\n        });\n        this.epub.on('renderer:chapterDisplayed', (chapter: EpubChapter) => {\n            this.zone.run(() => {\n                this.isChapterDisplayed = true;\n                // no label attribute here\n                chapter['label'] = null;\n                this.onChapterDisplayed.next(chapter);\n                this.currentLocation.chapter = chapter;\n                this.onLocationFound.next(this.currentLocation);\n                if (this.needComputePagination) {\n                    this.computePagination();\n                }\n            });\n        });\n        this.epub.on('renderer:resized', () => {\n            this.zone.run(() => {\n                this.needComputePagination = true;\n                if (this.autoPagination) {\n                    this.computePagination();\n                }\n            });\n        });\n        this.epub.on('renderer:visibleRangeChanged', range => {\n            this.zone.run(() => {\n                // renderer:locationChanged is a part of this event\n                this.currentLocation.startCfi = range.start;\n                this.currentLocation.endCfi = range.end;\n                this.onLocationFound.next(this.currentLocation);\n            });\n        });\n        this.epub.renderTo('angularEpubViewerComponent');\n    };\n\n    /**\n     * Opens EPUB document by link\n     * @param link\n     */\n    openLink(link: string) {\n        this._link.next(link);\n    }\n\n    /**\n     * Opens EPUB document file\n     * @param file\n     */\n    openFile(file: File) {\n        if (window['FileReader']) {\n            this.zone.runOutsideAngular(() => {\n                const reader: FileReader = new FileReader();\n                reader.onload = () => {\n                    this.zone.run(() => {\n                        this.initEpub({\n                            bookPath: reader.result\n                        });\n                    });\n                };\n                reader.onerror = () => {\n                    this.zone.run(() => {\n                        this.onErrorOccurred.emit(EpubError.READ_FILE);\n                    });\n                };\n                reader.readAsArrayBuffer(file);\n            });\n        } else {\n            this.onErrorOccurred.emit(EpubError.OPEN_FILE);\n        }\n    }\n\n    /**\n     * Navigates to the specified url or EPUB CFI or page\n     * @param location\n     */\n    goTo(location: string | number) {\n        if (!this.documentReady) {\n            this.onErrorOccurred.emit(EpubError.NOT_LOADED_DOCUMENT);\n            return;\n        }\n        if (typeof location === \"number\") {\n            // page\n            this.epub.displayChapter(location);\n        } else if (/.*html$/.test(location)) {\n            // url\n            this.epub.goto(location);\n        } else {\n            // EPUB CFI\n            this.epub.displayChapter(location);\n        }\n    }\n\n    /**\n     * Navigates to the next page\n     */\n    nextPage() {\n        if (!this.documentReady) {\n            this.onErrorOccurred.emit(EpubError.NOT_LOADED_DOCUMENT);\n            return;\n        }\n        this.epub.nextPage();\n    }\n\n    /**\n     * Navigates to the previous page\n     */\n    previousPage() {\n        if (!this.documentReady) {\n            this.onErrorOccurred.emit(EpubError.NOT_LOADED_DOCUMENT);\n            return;\n        }\n        this.epub.prevPage();\n    }\n\n    /**\n     * Searches all text matches *in the current chapter*\n     * @param text\n     */\n    searchText(text: string) {\n        if (!this.documentReady) {\n            this.onErrorOccurred.emit(EpubError.NOT_LOADED_DOCUMENT);\n            return;\n        }\n        if (!this.isChapterDisplayed) {\n            this.onErrorOccurred.emit(EpubError.NOT_DISPLAYED_CHAPTER);\n            return;\n        }\n        if (!text || text.trim().length <= 0) {\n            this.onErrorOccurred.emit(EpubError.SEARCH);\n            return;\n        }\n        if (this.searchingText) {\n            this.needSearchText = text;\n            return;\n        }\n        this.searchingText = true;\n        this.needSearchText = null;\n        this.zone.runOutsideAngular(() => {\n            const results: EpubSearchResult[] = this.epub.currentChapter.find(text.trim());\n            this.zone.run(() => {\n                this.searchingText = false;\n                if (this.needSearchText) {\n                    this.searchText(this.needSearchText);\n                } else {\n                    this.onSearchFinished.next(results);\n                }\n            });\n        });\n    }\n\n    /**\n     * Adds style to be attached to the document's body element\n     * @param style\n     * @param value\n     */\n    setStyle(style: string, value: string) {\n        if (!this.documentReady) {\n            this.onErrorOccurred.emit(EpubError.NOT_LOADED_DOCUMENT);\n            return;\n        }\n        this.epub.setStyle(style, value);\n    }\n\n    /**\n     * Removes a style from the rendered document\n     * @param style\n     */\n    resetStyle(style: string) {\n        if (!this.documentReady) {\n            this.onErrorOccurred.emit(EpubError.NOT_LOADED_DOCUMENT);\n            return;\n        }\n        this.epub.removeStyle(style);\n    }\n\n    /**\n     * Calculates pagination as output event\n     */\n    computePagination() {\n        if (!this.documentReady) {\n            this.onErrorOccurred.emit(EpubError.NOT_LOADED_DOCUMENT);\n            return;\n        }\n        if (!this.isChapterDisplayed) {\n            this.onErrorOccurred.emit(EpubError.NOT_DISPLAYED_CHAPTER);\n            return;\n        }\n        if (this.computingPagination) {\n            return;\n        }\n        this.computingPagination = true;\n        this.needComputePagination = false;\n        this.zone.runOutsideAngular(() => {\n            this.epub.generatePagination()\n                .then((pages: EpubPage[]) => {\n                    const currentPage = this.epub.pagination.pageFromCfi(this.epub.getCurrentLocationCfi());\n                    this.zone.run(() => {\n                        this.computingPagination = false;\n                        if (this.needComputePagination) {\n                            this.computePagination();\n                        } else {\n                            this.onPaginationComputed.next(pages);\n                            this.currentLocation.page = currentPage;\n                            this.onLocationFound.next(this.currentLocation);\n                        }\n                    });\n                })\n                .catch(() => {\n                    this.zone.run(() => {\n                        this.computingPagination = false;\n                        this.onErrorOccurred.emit(EpubError.COMPUTE_PAGINATION);\n                    });\n                });\n        });\n    }\n\n    /**\n     * Loads metadata as output event\n     */\n    loadMetadata() {\n        if (!this.documentReady) {\n            this.onErrorOccurred.emit(EpubError.NOT_LOADED_DOCUMENT);\n            return;\n        }\n        this.zone.runOutsideAngular(() => {\n            this.epub.getMetadata()\n                .then((metadata: EpubMetadata) => {\n                    this.zone.run(() => {\n                        this.onMetadataLoaded.next(metadata);\n                    });\n                })\n                .catch(() => {\n                    this.zone.run(() => {\n                        this.onErrorOccurred.emit(EpubError.LOAD_METADATA);\n                    });\n                });\n        });\n    }\n\n    /**\n     * Loads table of contents as output event\n     */\n    loadTOC() {\n        if (!this.documentReady) {\n            this.onErrorOccurred.emit(EpubError.NOT_LOADED_DOCUMENT);\n            return;\n        }\n        this.zone.runOutsideAngular(() => {\n            this.epub.getToc()\n                .then((chapters: EpubChapter[]) => {\n                    this.zone.run(() => {\n                        this.onTOCLoaded.next(chapters);\n                    });\n                })\n                .catch(() => {\n                    this.zone.run(() => {\n                        this.onErrorOccurred.emit(EpubError.LOAD_TOC);\n                    });\n                });\n        });\n    }\n\n    private destroyEpub() {\n        this.documentReady = false;\n        this.isChapterDisplayed = false;\n        this.searchingText = false;\n        this.needSearchText = null;\n        this.computingPagination = false;\n        this.needComputePagination = false;\n        this.currentLocation = {\n            startCfi: null,\n            endCfi: null,\n            page: null,\n            chapter: null\n        };\n        if (this.epub) {\n            this.epub.destroy();\n            this.epub = null;\n        }\n    };\n\n    ngOnDestroy() {\n        if (this.linkSubscription) {this.linkSubscription.unsubscribe();}\n        this.destroyEpub();\n    }\n}\n","import {NgModule} from '@angular/core';\nimport {AngularEpubViewerComponent} from './angularEpubViewer.component';\n\n@NgModule({\n  imports: [],\n  declarations: [AngularEpubViewerComponent],\n  exports: [AngularEpubViewerComponent]\n})\nexport class AngularEpubViewerModule {}\n"]}